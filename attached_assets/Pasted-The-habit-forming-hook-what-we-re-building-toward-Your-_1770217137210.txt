The habit-forming hook (what weâ€™re building toward)

Your â€œdaily openâ€ loop will come from three things:

Buzz Feed: â€œTrending near youâ€ powered by real user activity (clicks/saves)

Drop Alerts: watchlist notifications when something drops (Pro feature)

Daily Digest: â€œTodayâ€™s Top 10â€ + â€œ2 New Dropsâ€ (free once/day push, Pro gets custom alerts)

Thatâ€™s what makes it a habit app instead of a utility.

Repo structure (target)

/apps/mobile â†’ Expo app

/apps/api â†’ Node/Express backend

/db/migrations â†’ SQL migrations

README.md â†’ local + Railway steps

STEP 0 â€” Prep (you do this once)

âœ… Create a fresh GitHub repo (game repo separate)
Name idea: streamguide-mobile

âœ… Add these secrets/env later:

TMDB_API_KEY

DATABASE_URL

CRON_KEY

STEP 1 â€” Generate project skeleton (Expo + API + DB)

Codex Prompt 1 (paste this exactly):

Create a monorepo with:
- apps/mobile: Expo React Native app (TypeScript), React Navigation (bottom tabs)
- apps/api: Node.js + Express (TypeScript), pg for Postgres
- db/migrations: SQL migration files
Add package scripts at root to run mobile and api.

Mobile screens (empty but navigable):
- Splash
- RegionSelect
- Tabs: Trending, Upcoming, Watchlist
- TitleDetail
- Paywall
- Settings

API endpoints (stub returning mock JSON):
- GET /health
- GET /api/trending?region=US
- GET /api/buzz?region=US
- GET /api/upcoming?region=US
- GET /api/title/:mediaType/:tmdbId?region=US
- GET /api/watchlist?guestId=...
- POST /api/watchlist/add
- POST /api/watchlist/remove
- POST /api/events
- POST /api/admin/refresh?key=...

Add README with local run steps.


What you should see after Step 1:

Expo app opens and navigates between screens

API starts and returns mock data without crashing

STEP 2 â€” Unique design system (make it not generic)

This is where we make it feel like â€œa real product.â€

Codex Prompt 2:

Implement a unique UI theme for the Expo app:
- Dark â€œneon magazineâ€ style
- Big rounded cards with posters
- Provider chips as pill badges in a horizontal row
- A Buzz meter on cards (small bar + label â€œBuzzâ€)
- A â€œTonightâ€ header on Trending screen

Create reusable components:
- PosterCard
- ProviderChipsRow
- BuzzMeter
- SectionHeader

Trending screen layout:
1) TONIGHT ğŸ”¥ (Trending Today list)
2) TRENDING NEAR YOU (Buzz list)

Upcoming screen:
- Group by date with compact rows

Watchlist screen:
- Shows â€œ(x/10)â€ for Free users

Add skeleton loaders and empty-state UI that looks polished.
No real data integration yet; still use mock API responses.


What you should see after Step 2:

App looks unique (dark + chips + buzz bar)

Trending has two sections

Empty states look â€œdesigned,â€ not blank

STEP 3 â€” Real TMDB integration + caching (backend)

Now we replace mock API results.

Codex Prompt 3:

Replace mock API data with real TMDB integration in apps/api:
- Read TMDB_API_KEY from env
- Implement services:
  - fetchTrending(region): trending movies + tv (daily)
  - fetchDetails(mediaType, tmdbId, region)
  - fetchProviders(mediaType, tmdbId, region) best-effort
  - fetchUpcoming(region): upcoming movies + upcoming tv (best-effort)
- Add caching in Postgres:
  - titles
  - trending_cache
  - upcoming_cache
  - availability
- Add migrations in db/migrations and a simple migration runner script.
- /api/admin/refresh?key=CRON_KEY refreshes caches for regions US, CA, GB, AU.
- GET endpoints read from DB caches (not TMDB live).
Handle missing providers/posters gracefully.
Update README with exact env vars and commands.


What you should see after Step 3:

Hitting /api/admin/refresh?key=... populates DB

/api/trending?region=US returns real titles + posters

App shows real trending/upcoming

STEP 4 â€” â€œBuzzâ€ system (habit hook)

Now we add â€œpeople are talking about thisâ€ for real.

Codex Prompt 4:

Implement anonymous Buzz tracking:
- On TitleDetail open, mobile calls POST /api/events with eventType=view_title
- On watchlist add, mobile calls POST /api/events with eventType=watchlist_add

DB:
- events table
- buzz_cache table

In /api/admin/refresh:
- compute buzz_cache per region for last 24 hours with decay:
  - view_title weight 1
  - watchlist_add weight 4
  - time decay: last 6h = 1.0x, 6â€“24h = 0.5x
- GET /api/buzz?region=XX returns top buzz titles with score
- GET /api/trending returns blended list:
  - base TMDB trending rank
  - boost with buzz score
Return fields: buzzScore, isBuzzing boolean.
Update Trending UI to show â€œBuzzingâ€ tag when isBuzzing=true.
Add Settings toggle â€œShare anonymous usage analyticsâ€ (default on). If off, mobile does not send events.


What you should see after Step 4:

Your own activity changes â€œTrending Near Youâ€

â€œBuzzingâ€ tags appear

App feels alive (this is the TikTok vibe without TikTok data)

STEP 5 â€” Watchlist + habit loop

Codex Prompt 5:

Implement watchlist fully:
- guestId stored in AsyncStorage (UUID generated once)
- Watchlist list screen pulls from backend
- Free cap = 10 items; exceeding triggers paywall
- Add a â€œDaily Digestâ€ section at top of Trending:
  - â€œTop 10 Todayâ€
  - â€œNew this weekâ€
  - â€œ2 drops todayâ€ (based on upcoming)
Cache daily digest in backend during refresh.

Add a â€œStreakâ€ mechanic:
- Track opens per day locally (no account)
- Show â€œStreak: X daysâ€ on Trending header
- Award a cosmetic badge (free) after 3/7/14 days
No gamey coins, just clean motivation.


What you should see after Step 5:

Watchlist works

Streak motivates daily opens

Digest makes the home screen feel fresh daily

STEP 6 â€” Monetization (Pro without login)

Weâ€™ll keep it store-safe and simple.

Codex Prompt 6:

Add Pro monetization structure (no login):
- Implement an Entitlements module:
  - isPro(): boolean
  - setPro(bool)
  - restorePurchases(): placeholder
- For now, simulate Pro via a dev toggle in Settings (DEV ONLY) so we can test flows.

Pro unlocks:
- Unlimited watchlist
- Platform filters
- No ads (ads can be stubbed)
- Release alerts (stub UI + backend hooks)

Paywall screen:
- Copy that sells:
  - â€œUnlimited Watchlistâ€
  - â€œDrop Alertsâ€
  - â€œFilter by your servicesâ€
  - â€œNo Adsâ€
- Buttons: Monthly, Yearly, Restore Purchases

Add â€œRestore Purchasesâ€ UI and wiring placeholder.
Document in README how to later plug in real Expo IAP library.


What you should see after Step 6:

Paywall works

Pro gates features without login

You can test Pro flows immediately (dev toggle)

STEP 7 â€” Push notifications (habit + Pro)

This is what really drives daily opens.

Codex Prompt 7:

Add notifications support (Expo):
- Request push permission
- Store pushToken on backend with guestId + region
- Backend job (during refresh) checks:
  - upcoming items in next 24h
  - if user watchlist matches upcoming release, queue notification
- Implement a simple notification queue table and a sender stub (log to console).
Add a â€œDaily Digest Notificationâ€ for all users (optional toggle).
Pro users can enable â€œWatchlist Alertsâ€.


You can ship with daily digest pushes first, then wire full watchlist alerts next.

Positioning so you donâ€™t look like JustWatch

Use this framing everywhere:

Store subtitle/hero line

â€œWhatâ€™s blowing up tonight â€” by country.â€

Key feature bullets

â€œTrending today + trending near youâ€

â€œUpcoming drops this weekâ€

â€œWatchlist alerts (Pro)â€

â€œPick your country, pick your servicesâ€

Donâ€™t say

â€œFind where to watch everythingâ€
That screams commodity.